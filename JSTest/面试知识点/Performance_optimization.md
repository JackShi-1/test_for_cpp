### 1. CDN
#### 1.1 CDNçš„æ¦‚å¿µ
> `CDN`ï¼ˆ`Content Delivery Network`ï¼Œ**å†…å®¹åˆ†å‘ç½‘ç»œ**ï¼‰æ˜¯æŒ‡ä¸€ç§é€šè¿‡äº’è”ç½‘äº’ç›¸è¿žæŽ¥çš„ç”µè„‘ç½‘ç»œç³»ç»Ÿï¼Œåˆ©ç”¨æœ€é è¿‘æ¯ä½ç”¨æˆ·çš„æœåŠ¡å™¨ï¼Œæ›´å¿«ã€æ›´å¯é åœ°å°†éŸ³ä¹ã€å›¾ç‰‡ã€è§†é¢‘ã€åº”ç”¨ç¨‹åºåŠå…¶ä»–æ–‡ä»¶å‘é€ç»™ç”¨æˆ·ï¼Œæ¥æä¾›é«˜æ€§èƒ½ã€å¯æ‰©å±•æ€§åŠä½Žæˆæœ¬çš„ç½‘ç»œå†…å®¹ä¼ é€’ç»™ç”¨æˆ·ã€‚

å…¸åž‹çš„CDNç³»ç»Ÿç”±ä¸‹é¢ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š
1. **åˆ†å‘æœåŠ¡ç³»ç»Ÿ**
   1. æœ€åŸºæœ¬çš„å·¥ä½œå•å…ƒå°±æ˜¯Cacheè®¾å¤‡ï¼Œcacheï¼ˆè¾¹ç¼˜cacheï¼‰è´Ÿè´£ç›´æŽ¥å“åº”æœ€ç»ˆç”¨æˆ·çš„è®¿é—®è¯·æ±‚ï¼ŒæŠŠç¼“å­˜åœ¨æœ¬åœ°çš„å†…å®¹å¿«é€Ÿåœ°æä¾›ç»™ç”¨æˆ·ã€‚
   2. cacheè¿˜è´Ÿè´£ä¸Žæºç«™ç‚¹è¿›è¡Œå†…å®¹åŒæ­¥ï¼ŒæŠŠæ›´æ–°çš„å†…å®¹ä»¥åŠæœ¬åœ°æ²¡æœ‰çš„å†…å®¹ä»Žæºç«™ç‚¹èŽ·å–å¹¶ä¿å­˜åœ¨æœ¬åœ°ã€‚
   3. Cacheè®¾å¤‡çš„æ•°é‡ã€è§„æ¨¡ã€æ€»æœåŠ¡èƒ½åŠ›æ˜¯è¡¡é‡ä¸€ä¸ªCDNç³»ç»ŸæœåŠ¡èƒ½åŠ›çš„æœ€åŸºæœ¬çš„æŒ‡æ ‡ã€‚
2. **è´Ÿè½½å‡è¡¡ç³»ç»Ÿ**
   1. ä¸»è¦åŠŸèƒ½æ˜¯è´Ÿè´£å¯¹æ‰€æœ‰å‘èµ·æœåŠ¡è¯·æ±‚çš„ç”¨æˆ·è¿›è¡Œè®¿é—®è°ƒåº¦ï¼Œç¡®å®šæä¾›ç»™ç”¨æˆ·çš„æœ€ç»ˆå®žé™…è®¿é—®åœ°å€ã€‚
   2. ä¸¤çº§è°ƒåº¦ä½“ç³»åˆ†ä¸ºå…¨å±€è´Ÿè½½å‡è¡¡ï¼ˆGSLBï¼‰å’Œæœ¬åœ°è´Ÿè½½å‡è¡¡ï¼ˆSLBï¼‰ã€‚
      1. å…¨å±€è´Ÿè½½å‡è¡¡ä¸»è¦æ ¹æ®ç”¨æˆ·å°±è¿‘æ€§åŽŸåˆ™ï¼Œé€šè¿‡å¯¹æ¯ä¸ªæœåŠ¡èŠ‚ç‚¹è¿›è¡Œâ€œæœ€ä¼˜â€åˆ¤æ–­ï¼Œç¡®å®šå‘ç”¨æˆ·æä¾›æœåŠ¡çš„cacheçš„ç‰©ç†ä½ç½®ã€‚
      2. æœ¬åœ°è´Ÿè½½å‡è¡¡ä¸»è¦è´Ÿè´£èŠ‚ç‚¹å†…éƒ¨çš„è®¾å¤‡è´Ÿè½½å‡è¡¡
3. **è¿è¥ç®¡ç†ç³»ç»Ÿ**
   1. è¿è¥ç®¡ç†ç³»ç»Ÿåˆ†ä¸ºè¿è¥ç®¡ç†å’Œç½‘ç»œç®¡ç†å­ç³»ç»Ÿï¼Œè´Ÿè´£å¤„ç†ä¸šåŠ¡å±‚é¢çš„ä¸Žå¤–ç•Œç³»ç»Ÿäº¤äº’æ‰€å¿…é¡»çš„æ”¶é›†ã€æ•´ç†ã€äº¤ä»˜å·¥ä½œï¼ŒåŒ…å«å®¢æˆ·ç®¡ç†ã€äº§å“ç®¡ç†ã€è®¡è´¹ç®¡ç†ã€ç»Ÿè®¡åˆ†æžç­‰åŠŸèƒ½ã€‚
#### 1.2 CDNçš„ä½œç”¨
> CDNä¸€èˆ¬ä¼šç”¨æ¥æ‰˜ç®¡Webèµ„æºï¼ˆåŒ…æ‹¬æ–‡æœ¬ã€å›¾ç‰‡å’Œè„šæœ¬ç­‰ï¼‰ï¼Œå¯ä¾›ä¸‹è½½çš„èµ„æºï¼ˆåª’ä½“æ–‡ä»¶ã€è½¯ä»¶ã€æ–‡æ¡£ç­‰ï¼‰ï¼Œåº”ç”¨ç¨‹åºï¼ˆé—¨æˆ·ç½‘ç«™ç­‰ï¼‰ã€‚ä½¿ç”¨CDNæ¥åŠ é€Ÿè¿™äº›èµ„æºçš„è®¿é—®ã€‚

- åœ¨æ€§èƒ½æ–¹é¢ï¼Œå¼•å…¥CDNçš„ä½œç”¨åœ¨äºŽï¼š
  - ç”¨æˆ·æ”¶åˆ°çš„å†…å®¹æ¥è‡ªæœ€è¿‘çš„æ•°æ®ä¸­å¿ƒï¼Œå»¶è¿Ÿæ›´ä½Žï¼Œå†…å®¹åŠ è½½æ›´å¿«
  - éƒ¨åˆ†èµ„æºè¯·æ±‚åˆ†é…ç»™äº†CDNï¼Œå‡å°‘äº†æœåŠ¡å™¨çš„è´Ÿè½½
- åœ¨å®‰å…¨æ–¹é¢ï¼ŒCDNæœ‰åŠ©äºŽé˜²å¾¡`DDoS`ã€`MITM`ç­‰ç½‘ç»œæ”»å‡»ï¼š
  - é’ˆå¯¹`DDoS`ï¼šé€šè¿‡ç›‘æŽ§åˆ†æžå¼‚å¸¸æµé‡ï¼Œé™åˆ¶å…¶è¯·æ±‚é¢‘çŽ‡
  - é’ˆå¯¹`MITM`ï¼šä»ŽæºæœåŠ¡å™¨åˆ° `CDN` èŠ‚ç‚¹åˆ° `ISP`ï¼ˆInternet Service Providerï¼‰ï¼Œå…¨é“¾è·¯ `HTTPS` é€šä¿¡
- é™¤æ­¤ä¹‹å¤–ï¼Œ`CDN`ä½œä¸ºä¸€ç§åŸºç¡€çš„äº‘æœåŠ¡ï¼ŒåŒæ ·å…·æœ‰èµ„æºæ‰˜ç®¡ã€æŒ‰éœ€æ‰©å±•ï¼ˆèƒ½å¤Ÿåº”å¯¹æµé‡é«˜å³°ï¼‰ç­‰æ–¹é¢çš„ä¼˜åŠ¿
#### 1.3 CDNçš„åŽŸç†
1. ç”¨æˆ·æœªä½¿ç”¨CDNç¼“å­˜èµ„æºçš„è¿‡ç¨‹ï¼š
   1. æµè§ˆå™¨é€šè¿‡DNSå¯¹åŸŸåè¿›è¡Œè§£æžï¼ˆå°±æ˜¯ä¸Šé¢çš„DNSè§£æžè¿‡ç¨‹ï¼‰ï¼Œä¾æ¬¡å¾—åˆ°æ­¤åŸŸåå¯¹åº”çš„IPåœ°å€
   2. æµè§ˆå™¨æ ¹æ®å¾—åˆ°çš„IPåœ°å€ï¼Œå‘åŸŸåçš„æœåŠ¡ä¸»æœºå‘é€æ•°æ®è¯·æ±‚
   3. æœåŠ¡å™¨å‘æµè§ˆå™¨è¿”å›žå“åº”æ•°æ®
2. ç”¨æˆ·ä½¿ç”¨CDNç¼“å­˜èµ„æºçš„è¿‡ç¨‹ï¼š
   1. å¯¹äºŽç‚¹å‡»çš„æ•°æ®çš„URLï¼Œç»è¿‡æœ¬åœ°DNSç³»ç»Ÿçš„è§£æžï¼Œå‘çŽ°è¯¥URLå¯¹åº”çš„æ˜¯ä¸€ä¸ªCDNä¸“ç”¨çš„DNSæœåŠ¡å™¨ï¼ŒDNSç³»ç»Ÿå°±ä¼šå°†åŸŸåè§£æžæƒäº¤ç»™CNAMEæŒ‡å‘çš„CDNä¸“ç”¨çš„DNSæœåŠ¡å™¨ã€‚
   2. CNDä¸“ç”¨DNSæœåŠ¡å™¨å°†CNDçš„å…¨å±€è´Ÿè½½å‡è¡¡è®¾å¤‡IPåœ°å€è¿”å›žç»™ç”¨æˆ·
   3. ç”¨æˆ·å‘CDNçš„å…¨å±€è´Ÿè½½å‡è¡¡è®¾å¤‡å‘èµ·æ•°æ®è¯·æ±‚
   4. CDNçš„å…¨å±€è´Ÿè½½å‡è¡¡è®¾å¤‡æ ¹æ®ç”¨æˆ·çš„IPåœ°å€ï¼Œä»¥åŠç”¨æˆ·è¯·æ±‚çš„å†…å®¹URLï¼Œé€‰æ‹©ä¸€å°ç”¨æˆ·æ‰€å±žåŒºåŸŸçš„åŒºåŸŸè´Ÿè½½å‡è¡¡è®¾å¤‡ï¼Œå‘Šè¯‰ç”¨æˆ·å‘è¿™å°è®¾å¤‡å‘èµ·è¯·æ±‚
   5. åŒºåŸŸè´Ÿè½½å‡è¡¡è®¾å¤‡é€‰æ‹©ä¸€å°åˆé€‚çš„ç¼“å­˜æœåŠ¡å™¨æ¥æä¾›æœåŠ¡ï¼Œå°†è¯¥ç¼“å­˜æœåŠ¡å™¨çš„IPåœ°å€è¿”å›žç»™å…¨å±€è´Ÿè½½å‡è¡¡è®¾å¤‡
   6. å…¨å±€è´Ÿè½½å‡è¡¡è®¾å¤‡æŠŠæœåŠ¡å™¨çš„IPåœ°å€è¿”å›žç»™ç”¨æˆ·
   7. ç”¨æˆ·å‘è¯¥ç¼“å­˜æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç¼“å­˜æœåŠ¡å™¨å“åº”ç”¨æˆ·çš„è¯·æ±‚ï¼Œå°†ç”¨æˆ·æ‰€éœ€å†…å®¹å‘é€è‡³ç”¨æˆ·ç»ˆç«¯ã€‚
3. å¦‚æžœç¼“å­˜æœåŠ¡å™¨æ²¡æœ‰ç”¨æˆ·æƒ³è¦çš„å†…å®¹ï¼Œé‚£ä¹ˆç¼“å­˜æœåŠ¡å™¨å°±ä¼šå‘å®ƒçš„ä¸Šä¸€çº§ç¼“å­˜æœåŠ¡å™¨è¯·æ±‚å†…å®¹ï¼Œä»¥æ­¤ç±»æŽ¨ï¼Œç›´åˆ°èŽ·å–åˆ°éœ€è¦çš„èµ„æºã€‚æœ€åŽå¦‚æžœè¿˜æ˜¯æ²¡æœ‰ï¼Œå°±ä¼šå›žåˆ°è‡ªå·±çš„æœåŠ¡å™¨åŽ»èŽ·å–èµ„æºã€‚

#### 1.3 CDNçš„ä½¿ç”¨åœºæ™¯
- **ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„CDNæœåŠ¡**
  - å¦‚æžœæƒ³è¦å¼€æºä¸€äº›é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„CDNæœåŠ¡
- **ä½¿ç”¨CDNè¿›è¡Œé™æ€èµ„æºçš„ç¼“å­˜**
  - å°†è‡ªå·±ç½‘ç«™çš„é™æ€èµ„æºæ”¾åœ¨CDNä¸Šï¼Œæ¯”å¦‚jsã€cssã€å›¾ç‰‡ç­‰ã€‚å¯ä»¥å°†æ•´ä¸ªé¡¹ç›®æ”¾åœ¨CDNä¸Šï¼Œå®Œæˆä¸€é”®éƒ¨ç½²ã€‚
- **ç›´æ’­ä¼ é€**
  - ç›´æ’­æœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨æµåª’ä½“è¿›è¡Œä¼ é€ï¼ŒCDNä¹Ÿæ˜¯æ”¯æŒæµåª’ä½“ä¼ é€çš„ï¼Œæ‰€ä»¥ç›´æ’­å®Œå…¨å¯ä»¥ä½¿ç”¨CDNæ¥æé«˜è®¿é—®é€Ÿåº¦ã€‚
  - CDNåœ¨å¤„ç†æµåª’ä½“çš„æ—¶å€™ä¸Žå¤„ç†æ™®é€šé™æ€æ–‡ä»¶æœ‰æ‰€ä¸åŒï¼Œæ™®é€šæ–‡ä»¶å¦‚æžœåœ¨è¾¹ç¼˜èŠ‚ç‚¹æ²¡æœ‰æ‰¾åˆ°çš„è¯ï¼Œå°±ä¼šåŽ»ä¸Šä¸€å±‚æŽ¥ç€å¯»æ‰¾ï¼Œä½†æ˜¯æµåª’ä½“æœ¬èº«æ•°æ®é‡å°±éžå¸¸å¤§ï¼Œå¦‚æžœä½¿ç”¨å›žæºçš„æ–¹å¼ï¼Œå¿…ç„¶ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œæ‰€ä»¥æµåª’ä½“ä¸€èˆ¬é‡‡ç”¨çš„éƒ½æ˜¯ä¸»åŠ¨æŽ¨é€çš„æ–¹å¼æ¥è¿›è¡Œã€‚

### 2. æ‡’åŠ è½½
### 3. å›žæµä¸Žé‡ç»˜
#### 3.1 å›žæµï¼ˆé‡æŽ’ï¼‰ä¸Žé‡ç»˜çš„æ¦‚å¿µåŠè§¦å‘æ¡ä»¶
1. å›žæµ
> å½“æ¸²æŸ“æ ‘ä¸­éƒ¨åˆ†æˆ–è€…å…¨éƒ¨å…ƒç´ çš„å°ºå¯¸ã€ç»“æž„æˆ–è€…å±žæ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæµè§ˆå™¨ä¼šé‡æ–°æ¸²æŸ“éƒ¨åˆ†æˆ–è€…å…¨éƒ¨æ–‡æ¡£çš„è¿‡ç¨‹å°±ç§°ä¸ºå›žæµã€‚
> 
ä¸‹é¢è¿™äº›æ“ä½œä¼šå¯¼è‡´å›žæµï¼š
- é¡µé¢çš„é¦–æ¬¡æ¸²æŸ“
- æµè§ˆå™¨çš„çª—å£å¤§å°å‘ç”Ÿå˜åŒ–
- å…ƒç´ çš„å†…å®¹å‘ç”Ÿå˜åŒ–
- å…ƒç´ çš„å°ºå¯¸æˆ–è€…ä½ç½®å‘ç”Ÿå˜åŒ–
- å…ƒç´ çš„å­—ä½“å¤§å°å‘ç”Ÿå˜åŒ–
- æ¿€æ´»CSSä¼ªç±»
- æŸ¥è¯¢æŸäº›å±žæ€§æˆ–è€…è°ƒç”¨æŸäº›æ–¹æ³•
- æ·»åŠ æˆ–è€…åˆ é™¤å¯è§çš„DOMå…ƒç´ 

åœ¨è§¦å‘å›žæµï¼ˆé‡æŽ’ï¼‰çš„æ—¶å€™ï¼Œç”±äºŽæµè§ˆå™¨æ¸²æŸ“é¡µé¢æ˜¯åŸºäºŽæµå¼å¸ƒå±€çš„ï¼Œæ‰€ä»¥å½“è§¦å‘å›žæµæ—¶ï¼Œä¼šå¯¼è‡´å‘¨å›´çš„DOMå…ƒç´ é‡æ–°æŽ’åˆ—ï¼Œå®ƒçš„å½±å“èŒƒå›´æœ‰ä¸¤ç§ï¼š
- å…¨å±€èŒƒå›´ï¼šä»Žæ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå¯¹æ•´ä¸ªæ¸²æŸ“æ ‘è¿›è¡Œé‡æ–°å¸ƒå±€
- å±€éƒ¨èŒƒå›´ï¼šå¯¹æ¸²æŸ“æ ‘çš„æŸéƒ¨åˆ†æˆ–è€…ä¸€ä¸ªæ¸²æŸ“å¯¹è±¡è¿›è¡Œé‡æ–°å¸ƒå±€

ï¼ˆ2ï¼‰é‡ç»˜
>å½“é¡µé¢ä¸­æŸäº›å…ƒç´ çš„æ ·å¼å‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯ä¸ä¼šå½±å“å…¶åœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šå¯¹å…ƒç´ è¿›è¡Œé‡æ–°ç»˜åˆ¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯é‡ç»˜ã€‚

ä¸‹é¢è¿™äº›æ“ä½œä¼šå¯¼è‡´å›žæµï¼š
- `color`ã€`background` ç›¸å…³å±žæ€§ï¼š`background-color`ã€`background-image` ç­‰
- `outline` ç›¸å…³å±žæ€§ï¼šoutline-colorã€outline-width ã€text-decoration
border-radiusã€visibilityã€box-shadow

æ³¨æ„ï¼š å½“è§¦å‘å›žæµæ—¶ï¼Œä¸€å®šä¼šè§¦å‘é‡ç»˜ï¼Œä½†æ˜¯é‡ç»˜ä¸ä¸€å®šä¼šå¼•å‘å›žæµã€‚

#### å¦‚ä½•é¿å…å›žæµä¸Žé‡ç»˜ï¼Ÿ
å‡å°‘å›žæµä¸Žé‡ç»˜çš„æŽªæ–½ï¼š
- æ“ä½œDOMæ—¶ï¼Œå°½é‡åœ¨ä½Žå±‚çº§çš„DOMèŠ‚ç‚¹è¿›è¡Œæ“ä½œ
- ä¸è¦ä½¿ç”¨tableå¸ƒå±€ï¼Œ ä¸€ä¸ªå°çš„æ”¹åŠ¨å¯èƒ½ä¼šä½¿æ•´ä¸ªtableè¿›è¡Œé‡æ–°å¸ƒå±€
- ä½¿ç”¨CSSçš„è¡¨è¾¾å¼
- ä¸è¦é¢‘ç¹æ“ä½œå…ƒç´ çš„æ ·å¼ï¼Œå¯¹äºŽé™æ€é¡µé¢ï¼Œå¯ä»¥ä¿®æ”¹ç±»åï¼Œè€Œä¸æ˜¯æ ·å¼ã€‚
- ä½¿ç”¨absoluteæˆ–è€…fixedï¼Œä½¿å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œè¿™æ ·ä»–ä»¬å‘ç”Ÿå˜åŒ–å°±ä¸ä¼šå½±å“å…¶ä»–å…ƒç´ 
- é¿å…é¢‘ç¹æ“ä½œDOMï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–‡æ¡£ç‰‡æ®µdocumentFragmentï¼Œåœ¨å®ƒä¸Šé¢åº”ç”¨æ‰€æœ‰DOMæ“ä½œï¼Œæœ€åŽå†æŠŠå®ƒæ·»åŠ åˆ°æ–‡æ¡£ä¸­
- å°†å…ƒç´ å…ˆè®¾ç½®display: noneï¼Œæ“ä½œç»“æŸåŽå†æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥ã€‚å› ä¸ºåœ¨displayå±žæ€§ä¸ºnoneçš„å…ƒç´ ä¸Šè¿›è¡Œçš„DOMæ“ä½œä¸ä¼šå¼•å‘å›žæµå’Œé‡ç»˜ã€‚
- å°†DOMçš„å¤šä¸ªè¯»æ“ä½œï¼ˆæˆ–è€…å†™æ“ä½œï¼‰æ”¾åœ¨ä¸€èµ·ï¼Œè€Œä¸æ˜¯è¯»å†™æ“ä½œç©¿æ’ç€å†™ã€‚è¿™å¾—ç›ŠäºŽæµè§ˆå™¨çš„æ¸²æŸ“é˜Ÿåˆ—æœºåˆ¶ã€‚

æµè§ˆå™¨é’ˆå¯¹é¡µé¢çš„å›žæµä¸Žé‡ç»˜ï¼Œè¿›è¡Œäº†è‡ªèº«çš„ä¼˜åŒ–â€”â€”æ¸²æŸ“é˜Ÿåˆ—
æµè§ˆå™¨ä¼šå°†æ‰€æœ‰çš„å›žæµã€é‡ç»˜çš„æ“ä½œæ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå½“é˜Ÿåˆ—ä¸­çš„æ“ä½œåˆ°äº†ä¸€å®šçš„æ•°é‡æˆ–è€…åˆ°äº†ä¸€å®šçš„æ—¶é—´é—´éš”ï¼Œæµè§ˆå™¨å°±ä¼šå¯¹é˜Ÿåˆ—è¿›è¡Œæ‰¹å¤„ç†ã€‚è¿™æ ·å°±ä¼šè®©å¤šæ¬¡çš„å›žæµã€é‡ç»˜å˜æˆä¸€æ¬¡å›žæµé‡ç»˜ã€‚
ä¸Šé¢ï¼Œå°†å¤šä¸ªè¯»æ“ä½œï¼ˆæˆ–è€…å†™æ“ä½œï¼‰æ”¾åœ¨ä¸€èµ·ï¼Œå°±ä¼šç­‰æ‰€æœ‰çš„è¯»æ“ä½œè¿›å…¥é˜Ÿåˆ—ä¹‹åŽæ‰§è¡Œï¼Œè¿™æ ·ï¼ŒåŽŸæœ¬åº”è¯¥æ˜¯è§¦å‘å¤šæ¬¡å›žæµï¼Œå˜æˆäº†åªè§¦å‘ä¸€æ¬¡å›žæµã€‚

### 4. èŠ‚æµä¸Žé˜²æŠ–
### 5. å›¾ç‰‡ä¼˜åŒ–
#### 5.1. å¦‚ä½•å¯¹é¡¹ç›®ä¸­çš„å›¾ç‰‡è¿›è¡Œä¼˜åŒ–ï¼Ÿ
- ä¸ç”¨å›¾ç‰‡ã€‚å¾ˆå¤šæ—¶å€™ä¼šä½¿ç”¨åˆ°å¾ˆå¤šä¿®é¥°ç±»å›¾ç‰‡ï¼Œå…¶å®žè¿™ç±»ä¿®é¥°å›¾ç‰‡å®Œå…¨å¯ä»¥ç”¨ CSS åŽ»ä»£æ›¿ã€‚
- å¯¹äºŽç§»åŠ¨ç«¯æ¥è¯´ï¼Œå±å¹•å®½åº¦å°±é‚£ä¹ˆç‚¹ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦åŽ»åŠ è½½åŽŸå›¾æµªè´¹å¸¦å®½ã€‚ä¸€èˆ¬å›¾ç‰‡éƒ½ç”¨ CDN åŠ è½½ï¼Œå¯ä»¥è®¡ç®—å‡ºé€‚é…å±å¹•çš„å®½åº¦ï¼Œç„¶åŽåŽ»è¯·æ±‚ç›¸åº”è£å‰ªå¥½çš„å›¾ç‰‡ã€‚
- å°å›¾ä½¿ç”¨ base64 æ ¼å¼
- å°†å¤šä¸ªå›¾æ ‡æ–‡ä»¶æ•´åˆåˆ°ä¸€å¼ å›¾ç‰‡ä¸­ï¼ˆé›ªç¢§å›¾ï¼‰
- é€‰æ‹©æ­£ç¡®çš„å›¾ç‰‡æ ¼å¼ï¼š
  - å¯¹äºŽèƒ½å¤Ÿæ˜¾ç¤º WebP æ ¼å¼çš„æµè§ˆå™¨å°½é‡ä½¿ç”¨ WebP æ ¼å¼ã€‚å› ä¸º WebP æ ¼å¼å…·æœ‰æ›´å¥½çš„å›¾åƒæ•°æ®åŽ‹ç¼©ç®—æ³•ï¼Œèƒ½å¸¦æ¥æ›´å°çš„å›¾ç‰‡ä½“ç§¯ï¼Œè€Œä¸”æ‹¥æœ‰è‚‰çœ¼è¯†åˆ«æ— å·®å¼‚çš„å›¾åƒè´¨é‡ï¼Œç¼ºç‚¹å°±æ˜¯å…¼å®¹æ€§å¹¶ä¸å¥½
  - å°å›¾ä½¿ç”¨ PNGï¼Œå…¶å®žå¯¹äºŽå¤§éƒ¨åˆ†å›¾æ ‡è¿™ç±»å›¾ç‰‡ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ SVG ä»£æ›¿
  - ç…§ç‰‡ä½¿ç”¨ JPEG

### 6. Webpackä¼˜åŒ–
> `webpack`æ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œä»–çš„å®—æ—¨æ˜¯ä¸€åˆ‡é™æ€èµ„æºçš†å¯æ‰“åŒ…ã€‚
- ä¸ºä»€ä¹ˆè¦webpackï¼Ÿ
  - webpackæ˜¯çŽ°ä»£å‰ç«¯æŠ€æœ¯çš„åŸºçŸ³ï¼Œå¸¸è§„çš„å¼€å‘æ–¹å¼ï¼Œæ¯”å¦‚jquery,html,cssé™æ€ç½‘é¡µå¼€å‘å·²ç»è½åŽäº†ã€‚
  - çŽ°åœ¨æ˜¯MVVMçš„æ—¶ä»£ï¼Œæ•°æ®é©±åŠ¨ç•Œé¢ã€‚webpackå®ƒåšçš„äº‹æƒ…æ˜¯ï¼Œåˆ†æžä½ çš„é¡¹ç›®ç»“æž„ï¼Œæ‰¾åˆ°JavaScriptæ¨¡å—ä»¥åŠå…¶å®ƒçš„ä¸€äº›æµè§ˆå™¨ä¸èƒ½ç›´æŽ¥è¿è¡Œçš„æ‹“å±•è¯­è¨€ï¼ˆScssï¼ŒTypeScriptç­‰ï¼‰ï¼Œå¹¶å°†å…¶æ‰“åŒ…ä¸ºåˆé€‚çš„æ ¼å¼ä»¥ä¾›æµè§ˆå™¨ä½¿ç”¨ã€‚
#### 6.1 webpackæ ¸å¿ƒæ¦‚å¿µ
1. **Entryï¼ˆå…¥å£ï¼‰**ï¼šæŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæž„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚è¿›å…¥å…¥å£èµ·ç‚¹åŽï¼Œwebpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æŽ¥å’Œé—´æŽ¥ï¼‰ä¾èµ–çš„ã€‚
2. **Outputï¼ˆå‡ºå£ï¼‰**ï¼šå‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ç»“æžœæ–‡ä»¶ï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ï¼Œé»˜è®¤å€¼ä¸º./distã€‚
3. Loaderï¼ˆæ¨¡å—è½¬æ¢å™¨ï¼‰ï¼šå°†æ‰€æœ‰ç±»åž‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œç„¶åŽä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›ï¼Œå¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚
4. Pluginsï¼ˆæ’ä»¶ï¼‰ï¼šåœ¨ Webpack æž„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶æœºæ³¨å…¥æ‰©å±•é€»è¾‘æ¥æ”¹å˜æž„å»ºç»“æžœæˆ–åšä½ æƒ³è¦çš„äº‹æƒ…ã€‚
5. **Module(æ¨¡å—)**ï¼šå¼€å‘è€…å°†ç¨‹åºåˆ†è§£æˆç¦»æ•£åŠŸèƒ½å—ï¼Œå¹¶ç§°ä¹‹ä¸ºæ¨¡å—ï¼Œåœ¨webpacké‡Œä¸€ä¸ªæ¨¡å—å¯¹åº”ç€ä¸€ä¸ªæ–‡ä»¶ï¼Œwebpackä¼šä»Žé…ç½®çš„ Entry å¼€å§‹é€’å½’æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ã€‚

#### 6.2 Webpackæ‰§è¡Œæµç¨‹
- webpackå¯åŠ¨åŽä¼šåœ¨entryé‡Œé…ç½®çš„moduleå¼€å§‹é€’å½’è§£æžentryæ‰€ä¾èµ–çš„æ‰€æœ‰moduleï¼Œ
- æ¯æ‰¾åˆ°ä¸€ä¸ªmodule, å°±ä¼šæ ¹æ®é…ç½®çš„loaderåŽ»æ‰¾ç›¸åº”çš„è½¬æ¢è§„åˆ™ï¼Œå¯¹moduleè¿›è¡Œè½¬æ¢åŽåœ¨è§£æžå½“å‰moduleæ‰€ä¾èµ–çš„moduleï¼Œè¿™äº›æ¨¡å—ä¼šä»¥entryä¸ºåˆ†ç»„ï¼Œä¸€ä¸ªentryå’Œæ‰€æœ‰ç›¸ä¾èµ–çš„moduleä¹Ÿå°±æ˜¯ä¸€ä¸ªchunkï¼Œ
- æœ€åŽwebpackä¼šæŠŠæ‰€æœ‰chunkè½¬æ¢æˆæ–‡ä»¶è¾“å‡ºï¼Œåœ¨æ•´ä¸ªæµç¨‹ä¸­webpackä¼šåœ¨æ°å½“çš„æ—¶æœºæ‰§è¡Œpluginçš„é€»è¾‘

#### 6.3 å¦‚ä½•æâ¾¼webpackçš„æ‰“åŒ…é€Ÿåº¦?
##### 1. ä¼˜åŒ– Loader
> ðŸŒ°: Babel ä¼šå°†ä»£ç è½¬ä¸ºå­—ç¬¦ä¸²ç”Ÿæˆ ASTï¼Œç„¶åŽå¯¹ AST ç»§ç»­è¿›è¡Œè½¬å˜æœ€åŽå†ç”Ÿæˆæ–°çš„ä»£ç ï¼Œé¡¹ç›®è¶Šå¤§ï¼Œè½¬æ¢ä»£ç è¶Šå¤šï¼Œæ•ˆçŽ‡å°±è¶Šä½Žã€‚å½“ç„¶äº†ï¼Œè¿™æ˜¯å¯ä»¥ä¼˜åŒ–çš„
   1. ä¼˜åŒ– `Loader` çš„æ–‡ä»¶æœç´¢èŒƒå›´
   2. å°† `Babel` ç¼–è¯‘è¿‡çš„æ–‡ä»¶**ç¼“å­˜**èµ·æ¥
##### 2. HappyPack
- `Webpack` åœ¨æ‰“åŒ…çš„è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å•çº¿ç¨‹çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨æ‰§è¡Œ `Loader` çš„æ—¶å€™ï¼Œé•¿æ—¶é—´ç¼–è¯‘çš„ä»»åŠ¡å¾ˆå¤šï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ç­‰å¾…çš„æƒ…å†µ
- `HappyPack` å¯ä»¥å°† `Loader` çš„åŒæ­¥æ‰§è¡Œè½¬æ¢ä¸ºå¹¶è¡Œçš„ï¼Œè¿™æ ·å°±èƒ½å……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æºæ¥åŠ å¿«æ‰“åŒ…æ•ˆçŽ‡äº†
##### 3. DllPlugin
`DllPlugin` å¯ä»¥å°†ç‰¹å®šçš„ç±»åº“æå‰æ‰“åŒ…ç„¶åŽå¼•å…¥ã€‚è¿™ç§æ–¹å¼å¯ä»¥æžå¤§çš„å‡å°‘æ‰“åŒ…ç±»åº“çš„æ¬¡æ•°ï¼Œåªæœ‰å½“ç±»åº“æ›´æ–°ç‰ˆæœ¬æ‰æœ‰éœ€è¦é‡æ–°æ‰“åŒ…ï¼Œå¹¶ä¸”ä¹Ÿå®žçŽ°äº†å°†å…¬å…±ä»£ç æŠ½ç¦»æˆå•ç‹¬æ–‡ä»¶çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚
##### 4. ä»£ç åŽ‹ç¼©
- `Webpack3`: ä¸€èˆ¬ä½¿ç”¨ `UglifyJS` æ¥åŽ‹ç¼©ä»£ç ï¼Œä½†æ˜¯è¿™ä¸ªæ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œä¸ºäº†åŠ å¿«æ•ˆçŽ‡ï¼Œå¯ä»¥ä½¿ç”¨ webpack-parallel-uglify-plugin æ¥å¹¶è¡Œè¿è¡Œ UglifyJSï¼Œä»Žè€Œæé«˜æ•ˆçŽ‡ã€‚
- `Webpack4` ä¸­ï¼Œmode => production å°±å¯ä»¥é»˜è®¤å¼€å¯ä»¥ä¸ŠåŠŸèƒ½ã€‚ä»£ç åŽ‹ç¼©ä¹Ÿæ˜¯æˆ‘ä»¬å¿…åšçš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼Œå½“ç„¶æˆ‘ä»¬ä¸æ­¢å¯ä»¥åŽ‹ç¼© JS ä»£ç ï¼Œè¿˜å¯ä»¥åŽ‹ç¼© HTMLã€CSS ä»£ç ï¼Œå¹¶ä¸”åœ¨åŽ‹ç¼© JS ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡é…ç½®å®žçŽ°æ¯”å¦‚åˆ é™¤ console.log è¿™ç±»ä»£ç çš„åŠŸèƒ½ã€‚
##### å…¶ä»–
å¯ä»¥é€šè¿‡ä¸€äº›å°çš„ä¼˜åŒ–ç‚¹æ¥åŠ å¿«æ‰“åŒ…é€Ÿåº¦
- resolve.extensionsï¼šç”¨æ¥è¡¨æ˜Žæ–‡ä»¶åŽç¼€åˆ—è¡¨ï¼Œé»˜è®¤æŸ¥æ‰¾é¡ºåºæ˜¯ ['.js', '.json']ï¼Œå¦‚æžœä½ çš„å¯¼å…¥æ–‡ä»¶æ²¡æœ‰æ·»åŠ åŽç¼€å°±ä¼šæŒ‰ç…§è¿™ä¸ªé¡ºåºæŸ¥æ‰¾æ–‡ä»¶ã€‚æˆ‘ä»¬åº”è¯¥å°½å¯èƒ½å‡å°‘åŽç¼€åˆ—è¡¨é•¿åº¦ï¼Œç„¶åŽå°†å‡ºçŽ°é¢‘çŽ‡é«˜çš„åŽç¼€æŽ’åœ¨å‰é¢
- resolve.aliasï¼šå¯ä»¥é€šè¿‡åˆ«åçš„æ–¹å¼æ¥æ˜ å°„ä¸€ä¸ªè·¯å¾„ï¼Œèƒ½è®© Webpack æ›´å¿«æ‰¾åˆ°è·¯å¾„
- module.noParseï¼šå¦‚æžœä½ ç¡®å®šä¸€ä¸ªæ–‡ä»¶ä¸‹æ²¡æœ‰å…¶ä»–ä¾èµ–ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å±žæ€§è®© Webpack ä¸æ‰«æè¯¥æ–‡ä»¶ï¼Œè¿™ç§æ–¹å¼å¯¹äºŽå¤§åž‹çš„ç±»åº“å¾ˆæœ‰å¸®åŠ©

#### 6.4 å¦‚ä½•å‡å°‘ `Webpack` æ‰“åŒ…ä½“ç§¯
1. æŒ‰éœ€åŠ è½½
>å¯ä»¥ä½¿ç”¨æŒ‰éœ€åŠ è½½ï¼Œå°†æ¯ä¸ªè·¯ç”±é¡µé¢å•ç‹¬æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶
2. `Scope Hoisting`
> `Scope Hoisting` ä¼šåˆ†æžå‡ºæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå°½å¯èƒ½çš„æŠŠæ‰“åŒ…å‡ºæ¥çš„æ¨¡å—åˆå¹¶åˆ°ä¸€ä¸ªå‡½æ•°ä¸­åŽ»
> wp4: `optimization.concatenateModules`è®¾ç½®ä¸º`true`
3. Tree Shaking
> å®žçŽ°åˆ é™¤é¡¹ç›®ä¸­æœªè¢«å¼•ç”¨çš„ä»£ç 
#### 6.5 å¦‚ä½•â½¤webpackæ¥ä¼˜åŒ–å‰ç«¯æ€§èƒ½ï¼Ÿ
> â½¤webpackä¼˜åŒ–å‰ç«¯æ€§èƒ½æ˜¯æŒ‡ä¼˜åŒ–webpackçš„è¾“å‡ºç»“æžœï¼Œè®©æ‰“åŒ…çš„æœ€ç»ˆç»“æžœåœ¨æµè§ˆå™¨è¿â¾å¿«é€Ÿâ¾¼æ•ˆã€‚

- åŽ‹ç¼©ä»£ç ï¼šåˆ é™¤å¤šä½™çš„ä»£ç ã€æ³¨é‡Šã€ç®€åŒ–ä»£ç çš„å†™æ³•ç­‰ç­‰â½…å¼ã€‚å¯ä»¥åˆ©â½¤webpackçš„ UglifyJsPlugin å’Œ ParallelUglifyPlugin æ¥åŽ‹ç¼©JSâ½‚ä»¶ï¼Œ åˆ©â½¤ cssnano ï¼ˆcss-loader?minimizeï¼‰æ¥åŽ‹ç¼©css
- åˆ©â½¤CDNåŠ é€Ÿ: åœ¨æž„å»ºè¿‡ç¨‹ä¸­ï¼Œå°†å¼•â½¤çš„é™æ€èµ„æºè·¯å¾„ä¿®æ”¹ä¸ºCDNä¸Šå¯¹åº”çš„è·¯å¾„ã€‚å¯ä»¥åˆ©â½¤webpackå¯¹äºŽ output å‚æ•°å’Œå„loaderçš„ publicPath å‚æ•°æ¥ä¿®æ”¹èµ„æºè·¯å¾„
- Tree Shaking: å°†ä»£ç ä¸­æ°¸è¿œä¸ä¼šâ¾›åˆ°çš„â½šæ®µåˆ é™¤æŽ‰ã€‚å¯ä»¥é€šè¿‡åœ¨å¯åŠ¨webpackæ—¶è¿½åŠ å‚æ•° --optimize-minimize æ¥å®žçŽ°
- Code Splitting: å°†ä»£ç æŒ‰è·¯ç”±ç»´åº¦æˆ–è€…ç»„ä»¶åˆ†å—(chunk),è¿™æ ·åšåˆ°æŒ‰éœ€åŠ è½½,åŒæ—¶å¯ä»¥å……åˆ†åˆ©â½¤æµè§ˆå™¨ç¼“å­˜
- æå–å…¬å…±ç¬¬ä¸‰â½…åº“: `SplitChunksPlugin`æ’ä»¶æ¥è¿›â¾å…¬å…±æ¨¡å—æŠ½å–,åˆ©â½¤æµè§ˆå™¨ç¼“å­˜å¯ä»¥â»“æœŸç¼“å­˜è¿™äº›â½†éœ€é¢‘ç¹å˜åŠ¨çš„å…¬å…±ä»£ç 
#### 6.6 å¦‚ä½•æâ¾¼webpackçš„æž„å»ºé€Ÿåº¦ï¼Ÿ
1. å¤šâ¼Šâ¼æƒ…å†µä¸‹ï¼Œä½¿â½¤ `CommonsChunkPlugin` æ¥æå–å…¬å…±ä»£ç 
2. é€šè¿‡ `externals` é…ç½®æ¥æå–å¸¸â½¤åº“
3. åˆ©â½¤ `DllPlugin` å’Œ `DllReferencePlugin` é¢„ç¼–è¯‘èµ„æºæ¨¡å— é€šè¿‡ `DllPlugin` æ¥å¯¹é‚£äº›æˆ‘ä»¬å¼•â½¤ä½†æ˜¯ç»å¯¹ä¸ä¼šä¿®æ”¹çš„npmåŒ…æ¥è¿›â¾é¢„ç¼–è¯‘ï¼Œå†é€šè¿‡ `DllReferencePlugin` å°†é¢„ç¼–è¯‘çš„æ¨¡å—åŠ è½½è¿›æ¥ã€‚
4. ä½¿â½¤ `Happypack` å®žçŽ°å¤šçº¿ç¨‹åŠ é€Ÿç¼–è¯‘
5. ä½¿â½¤ `webpack-uglify-parallel` æ¥æå‡ `uglifyPlugin` çš„åŽ‹ç¼©é€Ÿåº¦ã€‚ åŽŸç†ä¸Š `webpack-uglify-parallel` é‡‡â½¤äº†å¤šæ ¸å¹¶â¾åŽ‹ç¼©æ¥æå‡åŽ‹ç¼©é€Ÿåº¦
6. ä½¿â½¤ `Tree-shaking` å’Œ `Scope Hoisting` æ¥å‰”é™¤å¤šä½™ä»£ç 

### 7. å¦‚ä½•é«˜æ•ˆæ¸²æŸ“å¤§æ•°æ®é‡
> è¯·æ±‚åˆ†ç»„+ä»»åŠ¡åˆ†ç»„
1ã€è§£å†³å¤§æ•°æ®é‡æ¸²æŸ“çš„é—®é¢˜ï¼Œå¸¸è§æ–¹æ³•æœ‰ï¼šæ—¶é—´åˆ†ç‰‡ã€è™šæ‹Ÿåˆ—è¡¨ç­‰ï¼›
2ã€è§£å†³åŒæ­¥é˜»å¡žçš„é—®é¢˜ï¼Œå¸¸è§æ–¹æ³•æœ‰ï¼šä»»åŠ¡åˆ†è§£ã€å¼‚æ­¥ç­‰ï¼›
3ã€å¦‚æžœæŸä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„è¯ï¼Œä»Žä¼˜åŒ–çš„è§’åº¦ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè€ƒè™‘å°†è¯¥ä»»åŠ¡åˆ†è§£æˆä¸€ç³»åˆ—çš„å­ä»»åŠ¡ã€‚
â€ƒâ€ƒåœ¨ä»»åŠ¡åˆ†ç»„ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°† setTimeout çš„æ—¶é—´é—´éš”è®¾ç½®ä¸º 100msï¼Œä¹Ÿå°±æ˜¯æˆ‘è®¤ä¸ºæœ€å¿«åœ¨ 100ms å†…èƒ½å®Œæˆæ¸²æŸ“ï¼›ä½†å‡è®¾ä¸åˆ° 100ms å°±å®Œæˆäº†æ¸²æŸ“ï¼Œé‚£ä¹ˆå°±éœ€è¦ç™½ç™½ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œè¿™æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚è¿™æ—¶å¯ä»¥è€ƒè™‘window.requestAnimationFrame æ–¹æ³•ã€‚
```js
setTimeout(() => {
  window.requestAnimationFrame(() => {
    loop(idx + renderOnce);
  }, 100);
});
```

